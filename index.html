<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal File Generator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for aesthetic feel */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-thumb {
            background-color: #10B981; /* Emerald Green */
            border-radius: 4px;
        }
        textarea::-webkit-scrollbar-track {
            background: #1E3A34; /* Deep Forest Green */
        }
        /* Ensure the body is full height for centering and proper absolute positioning */
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Inter', sans-serif;
        }
    </style>
    <script>
        // Define the custom color palette
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-dark': '#0F172A', /* Dark Slate/Blue-Greenish */
                        'card-dark': '#1E3A34', /* Deep Forest Green */
                        'accent-green': '#10B981', /* Emerald Green (Primary Action) */
                        'accent-orange': '#F97316', /* Deep Orange (Highlight) */
                        'text-primary': '#F3F4F6', /* White/Off-white */
                        'text-muted': '#9CA3AF', /* Gray 400 */
                    }
                }
            }
        }

        // --- Core JavaScript Logic ---

        // Function to create and trigger the download
        function downloadFile() {
            const content = document.getElementById('content-area').value;
            let filename = document.getElementById('filename-input').value.trim();
            const extension = document.getElementById('extension-select').value;
            
            // Validation
            if (!content) {
                showMessage("Please paste the content you wish to save.", 'error');
                return;
            }
            if (!filename) {
                filename = 'untitled'; // Default filename
            }

            const fullFilename = filename + extension;
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = fullFilename;

            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(a.href);

            showMessage(`Successfully created and downloaded: ${fullFilename}`, 'success');
        }

        // Action: Clears the content area
        function clearContent() {
            document.getElementById('content-area').value = '';
            showMessage("Content area cleared.", 'info');
        }

        // Action: Copies content to clipboard
        function copyContent() {
            const contentArea = document.getElementById('content-area');
            if (!contentArea.value) {
                showMessage("Nothing to copy.", 'error');
                return;
            }
            // Select content for execCommand method
            contentArea.select();
            contentArea.setSelectionRange(0, 99999); // For mobile devices

            // Use document.execCommand('copy') for robustness in iFrame environments
            try {
                const success = document.execCommand('copy');
                if (success) {
                    showMessage("Content copied to clipboard!", 'success');
                } else {
                    throw new Error("Copy command failed.");
                }
            } catch (err) {
                showMessage("Copy failed. Please select and copy manually.", 'error');
            }
        }

        // Action: Pastes content from clipboard
        async function pasteContent() {
            const contentArea = document.getElementById('content-area');
            try {
                // Use modern async clipboard API
                const text = await navigator.clipboard.readText();
                if (text) {
                    contentArea.value = text;
                    showMessage("Content pasted from clipboard.", 'info');
                } else {
                    showMessage("Clipboard is empty or permissions denied.", 'error');
                }
            } catch (err) {
                console.error("Paste error:", err);
                showMessage("Cannot access clipboard. Please paste manually (Ctrl+V or Cmd+V).", 'error');
            }
        }

        // Custom message box function (instead of alert)
        function showMessage(message, type) {
            const messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            
            // Clear previous classes and set new ones
            messageBox.classList.remove('hidden', 'bg-red-600', 'bg-accent-green', 'bg-sky-600', 'opacity-0');
            
            if (type === 'error') {
                messageBox.classList.add('bg-red-600');
            } else if (type === 'success') {
                messageBox.classList.add('bg-accent-green');
            } else if (type === 'info') {
                 // Soft blue for info/utility actions
                messageBox.classList.add('bg-sky-600'); 
            }

            // Show and fade out
            setTimeout(() => {
                messageBox.classList.remove('hidden');
                messageBox.classList.remove('opacity-0');
            }, 50);

            setTimeout(() => {
                messageBox.classList.add('opacity-0');
                // Hide completely after fade out
                setTimeout(() => messageBox.classList.add('hidden'), 500); 
            }, 4500);
        }

        // Attach event listener after the DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('download-button').addEventListener('click', downloadFile);
            document.getElementById('clear-button').addEventListener('click', clearContent);
            document.getElementById('copy-button').addEventListener('click', copyContent);
            document.getElementById('paste-button').addEventListener('click', pasteContent);
        });

    </script>
</head>
<body class="bg-bg-dark text-text-primary flex items-center justify-center p-4 relative">

    <!-- Dark Green Back Button -->
    <a href="https://hencheng2.github.io/all/" 
       title="Back to Index"
       class="absolute top-4 left-4 p-3 bg-card-dark hover:bg-gray-700 text-text-primary rounded-full shadow-2xl transition duration-300 ease-in-out z-10 border border-accent-green/30">
        <!-- SVG Arrow Icon for a cleaner look -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
    </a>

    <div class="w-full max-w-4xl space-y-4 mt-16 sm:mt-0">
        
        <!-- Header -->
        <header class="text-center space-y-2 mb-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-accent-orange drop-shadow-lg">
                File Creator
            </h1>
            <p class="text-text-muted text-lg">Paste content, name the file, and download it in your chosen format.</p>
        </header>

        <!-- Action Buttons Bar -->
        <div class="flex justify-end gap-3 mb-2">
            
            <button id="clear-button" class="py-2 px-4 text-sm font-semibold rounded-full bg-card-dark text-accent-orange border border-accent-orange/50 hover:bg-accent-orange hover:text-bg-dark transition duration-200 ease-in-out shadow-lg">
                Clear
            </button>

            <button id="paste-button" class="py-2 px-4 text-sm font-semibold rounded-full bg-card-dark text-accent-green border border-accent-green/50 hover:bg-accent-green hover:text-bg-dark transition duration-200 ease-in-out shadow-lg">
                Paste
            </button>

            <button id="copy-button" class="py-2 px-4 text-sm font-semibold rounded-full bg-card-dark text-text-primary border border-text-primary/50 hover:bg-text-primary hover:text-bg-dark transition duration-200 ease-in-out shadow-lg">
                Copy
            </button>
        </div>

        <!-- Content Input Area -->
        <div class="shadow-2xl rounded-xl overflow-hidden border border-card-dark">
            <textarea 
                id="content-area" 
                rows="15" 
                placeholder="Paste your code, document text, or configuration here..." 
                class="w-full p-6 bg-card-dark border-0 text-text-primary focus:ring-accent-green focus:border-accent-green rounded-xl focus:outline-none transition duration-150 ease-in-out text-sm resize-none"
            ></textarea>
        </div>

        <!-- Controls (Filename and Extension) -->
        <div class="flex flex-col sm:flex-row gap-4 pt-2">
            
            <!-- Filename Input -->
            <div class="flex-1">
                <label for="filename-input" class="block text-sm font-medium text-text-muted mb-1">File Name</label>
                <input 
                    type="text" 
                    id="filename-input" 
                    placeholder="e.g., my_project"
                    value="untitled"
                    class="w-full p-4 bg-card-dark border border-gray-700 text-text-primary focus:ring-accent-orange focus:border-accent-orange rounded-lg focus:outline-none transition duration-150 ease-in-out text-base"
                >
            </div>

            <!-- Extension Dropdown -->
            <div class="flex-1">
                <label for="extension-select" class="block text-sm font-medium text-text-muted mb-1">File Extension</label>
                <select id="extension-select" 
                    class="w-full p-4 bg-card-dark border border-gray-700 text-text-primary focus:ring-accent-orange focus:border-accent-orange rounded-lg focus:outline-none transition duration-150 ease-in-out text-base appearance-none cursor-pointer"
                    style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22%23F3F4F6%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M5.293%207.293a1%201%200%20011.414%200L10%2010.586l3.293-3.293a1%201%200%20111.414%201.414l-4%204a1%201%200%2001-1.414%200l-4-4a1%201%200%20010-1.414z%22%20clip-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1.5em 1.5em;"
                >
                    
                    <optgroup label="Code & Script Files" class="text-accent-green">
                        <option value=".py">.py (Python)</option>
                        <option value=".js">.js (JavaScript)</option>
                        <option value=".html">.html (HTML)</option>
                        <option value=".css">.css (CSS)</option>
                        <option value=".jsx">.jsx (React JSX)</option>
                        <option value=".json">.json</option>
                        <option value=".xml">.xml</option>
                        <option value=".yml">.yml (YAML)</option>
                        <option value=".php">.php</option>
                        <option value=".java">.java</option>
                        <option value=".c">.c</option>
                        <option value=".cpp">.cpp</option>
                        <option value=".sh">.sh (Shell Script)</option>
                        <option value=".sql">.sql</option>
                    </optgroup>
                    
                    <optgroup label="Document Files" class="text-accent-orange">
                        <option value=".txt">.txt (Plain Text)</option>
                        <option value=".md">.md (Markdown)</option>
                        <option value=".docx">.docx</option>
                        <option value=".pdf">.pdf</option>
                        <option value=".tex">.tex (LaTeX)</option>
                    </optgroup>

                    <optgroup label="Configuration Files" class="text-text-muted">
                        <option value=".conf">.conf</option>
                        <option value=".cfg">.cfg</option>
                        <option value=".ini">.ini</option>
                        <option value=".env">.env</option>
                    </optgroup>
                    
                    <!-- Less common categories grouped for brevity -->
                    <optgroup label="Other">
                        <option value=".csv">.csv (Spreadsheet)</option>
                        <option value=".mp3">.mp3 (Audio)</option>
                        <option value=".png">.png (Image)</option>
                        <option value=".zip">.zip (Archive)</option>
                        <option value=".exe">.exe (Executable)</option>
                        <option value=".db">.db (Database)</option>
                        <option value=".stl">.stl (3D Model)</option>
                    </optgroup>

                </select>
            </div>
        </div>

        <!-- Download Button -->
        <button 
            id="download-button" 
            class="w-full py-4 px-6 bg-accent-green hover:bg-card-dark text-text-primary text-xl font-bold rounded-xl shadow-2xl shadow-accent-green/20 transform hover:scale-[1.01] transition duration-300 ease-in-out border-2 border-accent-green focus:outline-none focus:ring-4 focus:ring-accent-green/50"
        >
            Download File
        </button>

        <!-- Message Box (Custom Alert) -->
        <div id="message-box" class="hidden fixed bottom-6 left-1/2 transform -translate-x-1/2 px-6 py-3 text-text-primary font-semibold rounded-full shadow-2xl transition-opacity duration-500 opacity-0 z-50">
            <!-- Messages appear here -->
        </div>

    </div>
</body>
</html>

